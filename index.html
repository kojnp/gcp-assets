<script type="text/javascript" src="asset-transform.js">

</script>

<body onload="init()">
    this is to test locally the json parsing before submitting a dataflow job

    see console output

    comment console.log from the asset-transform.js file before uploading to GCS

</body>

<script type="text/javascript">

  function init() {
    console.log(transformx("{\"name\":\"\/\/compute.googleapis.com\/projects\/forsetiproject\/zones\/us-central1-c\/instances\/forseti-server-vm-d0a8779\",\"asset_type\":\"compute.googleapis.com\/Instance\",\"resource\":{\"version\":\"v1\",\"discovery_document_uri\":\"https:\/\/www.googleapis.com\/discovery\/v1\/apis\/compute\/v1\/rest\",\"discovery_name\":\"Instance\",\"parent\":\"\/\/cloudresourcemanager.googleapis.com\/projects\/458610095\",\"data\":{\"cpuPlatform\":\"Intel Haswell\",\"creationTimestamp\":\"201927.054-07:00\",\"deletionProtection\":false,\"disk\":[{\"autoDelete\":true,\"boot\":true,\"deviceName\":\"boot\",\"guestOsFeature\":[{\"type\":\"VIRTIO_SCSI_MULTIQUEUE\"}],\"index\":0,\"interface\":\"SCSI\",\"license\":[\"https:\/\/www.googleapis.com\/compute\/v1\/projects\/ubuntu-os-cloud\/global\/licenses\/ubuntu-1804-lts\"],\"mode\":\"READ_WRITE\",\"source\":\"https:\/\/www.googleapis.com\/compute\/v1\/projects\/forsetiproject\/zones\/us-central1-c\/disks\/forseti-server-vm-d0a8779\",\"type\":\"PERSISTENT\"}],\"id\":\"3705672369\",\"labelFingerprint\":\"2kMu\/AHaM=\",\"labels\":{\"goog-dm\":\"forseti-server-d0a8779\"},\"machineType\":\"https:\/\/www.googleapis.com\/compute\/v1\/projects\/forsetiproject\/zones\/us-central1-c\/machineTypes\/n1-standard-2\",\"name\":\"forseti-server-vm-d0a8779\",\"networkInterface\":[{\"accessConfig\":[{\"externalIp\":\"130.211.208.173\",\"name\":\"External NAT\",\"networkTier\":\"PREMIUM\",\"type\":\"ONE_TO_ONE_NAT\"}],\"fingerprint\":\"GsYvPxY3dqE=\",\"ipAddress\":\"10.128.0.2\",\"name\":\"nic0\",\"network\":\"https:\/\/www.googleapis.com\/compute\/v1\/projects\/forsetiproject\/global\/networks\/default\",\"subnetwork\":\"https:\/\/www.googleapis.com\/compute\/v1\/projects\/forsetiproject\/regions\/us-central1\/subnetworks\/default\"}],\"scheduling\":{\"automaticRestart\":true,\"onHostMaintenance\":\"MIGRATE\",\"preemptible\":false},\"selfLink\":\"https:\/\/www.googleapis.com\/compute\/v1\/projects\/forsetiproject\/zones\/us-central1-c\/instances\/forseti-server-vm-d0a8779\",\"serviceAccount\":[{\"email\":\"forseti-server-gcp-d0a8779@forsetiproject.iam.gserviceaccount.com\",\"scope\":[\"https:\/\/www.googleapis.com\/auth\/cloud-platform\"]}],\"startRestricted\":false,\"status\":\"RUNNING\",\"tags\":{\"fingerprint\":\"42WmSpB8rSM=\"},\"zone\":\"https:\/\/www.googleapis.com\/compute\/v1\/projects\/forsetiproject\/zones\/us-central1-c\"}}}\r\n"));

    console.log(transformx("{\"name\":\"\/\/compute.googleapis.com\/projects\/forsetiproject\/zones\/us-central1-c\/instances\/forseti-server-vm-d0a8779\",\"asset_type\":\"compute.googleapis.com\/Instance\",\"resource\":{\"version\":\"v1\",\"discovery_document_uri\":\"https:\/\/www.googleapis.com\/discovery\/v1\/apis\/compute\/v1\/rest\",\"discovery_name\":\"Instance\",\"parent\":\"\/\/cloudresourcemanager.googleapis.com\/projects\/458610095\",\"data\":{\"cpuPlatform\":\"Intel Haswell\",\"creationTimestamp\":\"2019-05.054-07:00\",\"deletionProtection\":false,\"disk\":{\"autoDelete\":true,\"boot\":true,\"deviceName\":\"boot\",\"guestOsFeature\":[{\"type\":\"VIRTIO_SCSI_MULTIQUEUE\"}],\"index\":0,\"interface\":\"SCSI\",\"mode\":\"READ_WRITE\",\"source\":\"https:\/\/www.googleapis.com\/compute\/v1\/projects\/forsetiproject\/zones\/us-central1-c\/disks\/forseti-server-vm-d0a8779\",\"type\":\"PERSISTENT\"},\"id\":\"37050465772369\",\"labelFingerprint\":\"2u\/pSAHaM=\",\"labels\":{\"goog-dm\":\"forseti-server-d0a8779\"},\"machineType\":\"https:\/\/www.googleapis.com\/compute\/v1\/projects\/forsetiproject\/zones\/us-central1-c\/machineTypes\/n1-standard-2\",\"name\":\"forseti-server-vm-d0a8779\",\"networkInterface\":[{\"accessConfig\":[{\"externalIp\":\"130.211.208.173\",\"name\":\"External NAT\",\"networkTier\":\"PREMIUM\",\"type\":\"ONE_TO_ONE_NAT\"}],\"fingerprint\":\"GsYvdqE=\",\"ipAddress\":\"10.128.0.2\",\"name\":\"nic0\",\"network\":\"https:\/\/www.googleapis.com\/compute\/v1\/projects\/forsetiproject\/global\/networks\/default\",\"subnetwork\":\"https:\/\/www.googleapis.com\/compute\/v1\/projects\/forsetiproject\/regions\/us-central1\/subnetworks\/default\"}],\"scheduling\":{\"automaticRestart\":true,\"onHostMaintenance\":\"MIGRATE\",\"preemptible\":false},\"selfLink\":\"https:\/\/www.googleapis.com\/compute\/v1\/projects\/forsetiproject\/zones\/us-central1-c\/instances\/forseti-server-vm-d0a8779\",\"serviceAccount\":[{\"email\":\"forseti-server-gcp-d0a8779@forsetiproject.iam.gserviceaccount.com\",\"scope\":[\"https:\/\/www.googleapis.com\/auth\/cloud-platform\"]}],\"startRestricted\":false,\"status\":\"RUNNING\",\"tags\":{\"fingerprint\":\"42WmSpB8rSM=\"},\"zone\":\"https:\/\/www.googleapis.com\/compute\/v1\/projects\/forsetiproject\/zones\/us-central1-c\"}}}\r\n"));

  };
</script>
